
{% extends "base.html" %}

{% block title %}Buy UC - Walalka UC Store{% endblock %}

{% block content %}
<div class="container-custom">
    <div class="page-header">
        <h1 class="page-title">Buy UC</h1>
        <p class="page-subtitle">Dooro package-ka aad rabto</p>
    </div>

    <form method="POST">
        <!-- PUBG ID Input -->
        <div class="card-modern mb-4">
            <div class="card-body p-4">
                <h6 class="fw-bold mb-3">
                    <i class="bi bi-controller me-2"></i>PUBG Account Info
                </h6>
                <div class="mb-0">
                    <label for="pubg_id" class="form-label fw-medium">PUBG ID</label>
                    <input type="text" 
                           class="form-control-modern" 
                           id="pubg_id" 
                           name="pubg_id" 
                           placeholder="Gali PUBG ID-ga" 
                           required>
                    <small class="text-muted mt-1 d-block">
                        <i class="bi bi-info-circle me-1"></i>
                        Hubso in PUBG ID-gu saxda yahay
                    </small>
                </div>
            </div>
        </div>

        <!-- UC Packages -->
        <div class="card-modern mb-4">
            <div class="card-body p-4">
                <h6 class="fw-bold mb-3">
                    <i class="bi bi-gem me-2"></i>Select UC Package
                </h6>
                <div class="row g-3">
                    {% for package in packages %}
                    <div class="col-6">
                        <label class="package-option w-100">
                            <input type="radio" 
                                   name="package_id" 
                                   value="{{ package.id }}" 
                                   data-price="{{ package.price }}"
                                   required 
                                   style="display: none;">
                            <div class="package-card h-100" style="cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;">
                                <div class="text-center">
                                    <i class="bi bi-gem" style="font-size: 28px; color: #4facfe; margin-bottom: 12px; display: block;"></i>
                                    <div class="package-amount" style="font-size: 20px;">{{ package.uc_amount }} UC</div>
                                    <div class="package-price" style="font-size: 16px;">${{ "%.2f"|format(package.price) }}</div>
                                </div>
                            </div>
                        </label>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>

        <!-- Payment Method -->
        <div class="card-modern mb-4">
            <div class="card-body p-4">
                <h6 class="fw-bold mb-3">
                    <i class="bi bi-credit-card me-2"></i>Payment Method
                </h6>
                <select class="form-control-modern" name="payment_method" required>
                    <option value="">Dooro payment method</option>
                    <option value="edahab">ðŸ“± eDahab</option>
                    <option value="sahal">ðŸ’³ Sahal</option>
                    <option value="paypal">ðŸ’° PayPal</option>
                    <option value="stripe">ðŸ’³ Credit Card</option>
                </select>
            </div>
        </div>

        <!-- Order Summary -->
        <div class="card-modern mb-4" id="order-summary" style="display: none;">
            <div class="card-body p-4">
                <h6 class="fw-bold mb-3">
                    <i class="bi bi-receipt me-2"></i>Order Summary
                </h6>
                <div class="d-flex justify-content-between mb-2">
                    <span>Package:</span>
                    <span id="selected-package" class="fw-medium">-</span>
                </div>
                <div class="d-flex justify-content-between mb-2">
                    <span>Price:</span>
                    <span id="selected-price" class="fw-medium">$0.00</span>
                </div>
                <hr class="my-3">
                <div class="d-flex justify-content-between">
                    <span class="fw-bold">Total:</span>
                    <span id="total-price" class="fw-bold" style="color: #4facfe;">$0.00</span>
                </div>
            </div>
        </div>

        <!-- Submit Button -->
        <button type="submit" class="btn-primary-modern w-100" style="padding: 16px; font-size: 16px;">
            <i class="bi bi-cart-check me-2"></i>Place Order
        </button>
    </form>
</div>

<style>
.package-option input[type="radio"]:checked + .package-card {
    border-color: #4facfe !important;
    background: linear-gradient(135deg, rgba(79, 172, 254, 0.1), rgba(0, 242, 254, 0.1)) !important;
    transform: scale(0.98);
}

.package-option:hover .package-card {
    border-color: #4facfe;
    transform: translateY(-2px);
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const packageOptions = document.querySelectorAll('input[name="package_id"]');
    const orderSummary = document.getElementById('order-summary');
    const selectedPackage = document.getElementById('selected-package');
    const selectedPrice = document.getElementById('selected-price');
    const totalPrice = document.getElementById('total-price');

    packageOptions.forEach(option => {
        option.addEventListener('change', function() {
            if (this.checked) {
                const price = parseFloat(this.dataset.price);
                const packageText = this.parentElement.querySelector('.package-amount').textContent;
                
                selectedPackage.textContent = packageText;
                selectedPrice.textContent = '$' + price.toFixed(2);
                totalPrice.textContent = '$' + price.toFixed(2);
                
                orderSummary.style.display = 'block';
                orderSummary.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        });
    });
});
</script>
{% endblock %}
